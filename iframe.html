<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" href="css/reset.css">
        <link rel="stylesheet" type="text/css" href="css/main.css">
        <!-- include jQuery -->
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"></script>
    </head>
    <body>
        <script type="text/javascript" src="https://pym.nprapps.org/pym.v1.js"></script>
        <!-- <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script> -->
        <script src="https://d3js.org/d3.v4.min.js"></script>
        <script type="text/javascript">
        new pym.Child();
			pym.Child({ renderCallback: createGraphic });
			var svgDoc;
            
            function createGraphic(container_width)	{
                var mobSwitch=740;
    			//if svg already exists, clear out contents, else create svg element
    			if (typeof svgDoc !='undefined')	{
    				var myNode = document.getElementById("svgDoc");
					while (myNode.firstChild) {
					    myNode.removeChild(myNode.firstChild);
					}
    			}	else	{
    				svgDoc = d3.select("body").append("svg").attr("id","svgDoc");

    			}

    			//set the height of the graphic according to the width
    			if (container_width>mobSwitch)	{
                    //Desktop Background
    				svgDoc.attr("height",container_width*0.773);       
    			}	else	{
    				svgDoc.attr("height",container_width*1.5);
    			}

    			//create group - and append rect which shows the height of the svg graphic
    			var graph = svgDoc.append("g");

    			//var bg=graph.append("rect")
    				   // .attr("width","100%")
    				   // .attr("height","100%")
                       // .attr("id","landscape");

    			if (container_width>mobSwitch)	{
    				graph.append("text")
    					.attr("x",20)
    					.attr("y",20)
    					.text("Larger view (width = "+container_width+" pixels)");
 
                    //foreground
                    //Center Circle for alignment
                    graph.append("circle")
                        .attr("cx","50%")
                        .attr("cy","41.5%")
                        .attr("r","50px")
                        .attr("fill","#ffffff");
                    
                    //Circles left to right excluding center circle
                    graph.append("circle")
                        .attr("cx","13.2%")
                        .attr("cy","39.9%")
                        .attr("r","50px")
                        .attr("fill","#ffffff");
                        
                    graph.append("circle")
                        .attr("cx","31.6%")
                        .attr("cy","35.8%")
                        .attr("r","50px")
                        .attr("fill","#ffffff");
                        
                    graph.append("circle")
                        .attr("cx","68.4%")
                        .attr("cy","47.6%")
                        .attr("r","50px")
                        .attr("fill","#ffffff");
                        
                    graph.append("circle")
                        .attr("cx","86.8%")
                        .attr("cy","50.6%")
                        .attr("r","50px")
                        .attr("fill","#ffffff");
                    
                    //Background
                    //document.getElementById('landscape').style.backgroundImage = "url('images/thumb-1920-559128.jpg')";
                    document.getElementById('svgDoc').style.backgroundImage = "url('images/testBackground.png')";
                    document.getElementById('svgDoc').style.backgroundRepeat = "no-repeat";
    			}	else	{
    				graph.append("text")
    					.attr("x",20)
    					.attr("y",20)
    					.text("Smaller view (width = "+container_width+" pixels)");
                    
                    //woeful depiction of a person in portrait - but you get the idea
                    graph.append("ellipse")
                        .attr("cx",container_width/2)
                        .attr("cy",555)
                        .attr("rx",function(){return container_width/2})
                        .attr("ry","40%")
                        .attr("fill","#72512d");
                    graph.append("ellipse")
                        .attr("cx",container_width/2)
                        .attr("cy",300)
                        .attr("rx",function(){return container_width/4})
                        .attr("ry",175)
                        .attr("fill","pink");
                    graph.append("circle")
                        .attr("cx",function(){return (container_width/2)-30})
                        .attr("cy",270)
                        .attr("r",12)
                        .attr("class","eyes");
                    graph.append("circle")
                        .attr("cx",function(){return (container_width/2)+30})
                        .attr("cy",270)
                        .attr("r",12)
                        .attr("class","eyes");
                    graph.append("ellipse")
                        .attr("cx",container_width/2)
                        .attr("cy",400)
                        .attr("rx",15)
                        .attr("ry",25)
                        .attr("fill","black");
                    bg.attr("class","portrait");  
    			}
            }
        </script>
    </body>
</html>